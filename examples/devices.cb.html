<html>
<head>
    <title>Devices</title>
    <script src="config.js"></script>
    <script src="../dist/bundles/devices.js"></script>
</head>
<body>
    <div id="results"></div>

    <script>
        var resultsEl = document.getElementById("results");

        function log(message) {
            console.log(message);
            resultsEl.innerText += message + "\n";
        }

        var devices = new Devices.Devices(window.config);
        devices.getEndpoints(null, function(err, endpoints) {
            endpoints.forEach(function(endpoint) {
                endpoint.getResources(function(err, resources) {
                    log(endpoint.name);
                    resources.forEach(function(resource) {
                        resource.getValue(null, function(err, value) {
                            log(resource.uri);
                            log(value);
                        });
                    });
                });
            });
        });
    </script>
</body>
</html>