{"version":3,"sources":["foundation/policy.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Mbed","Cloud","Foundation","Policy","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Object","defineProperty","value","utils_1","Adapter","assignDefined","target","source","isObject","keys","map","key","_index","undefined","./utils","2","__read","m","Symbol","iterator","ar","next","done","push","error","__spread","arguments","concat","__values","s","TypeError","val","Array","isArray","isJwt","token","indexOf","union","array1","array2","equality","e_1","_a","res","x","y","array2_1","array2_1_1","item","some","e_1_1","return","arraysEqual","l","3","hasOwnProperty","./policyAdapter","4","__extends","extendStatics","d","b","setPrototypeOf","__proto__","__","constructor","prototype","create","adapter_1","PolicyAdapter","_super","apply","fromApi","data","instance","_discriminator","action","allow","feature","inherited","inheritedFrom","inherited_from","inheritedType","inherited_type","resource","../../../common/adapter"],"mappings":"CAAA,SAAUA,GAAG,GAAoB,gBAAVC,UAAoC,mBAATC,QAAsBA,OAAOD,QAAQD,QAAS,IAAmB,kBAATG,SAAqBA,OAAOC,IAAKD,UAAUH,OAAO,CAAC,GAAIK,EAAkCA,GAAb,mBAATC,QAAwBA,OAA+B,mBAATC,QAAwBA,OAA6B,mBAAPC,MAAsBA,KAAYC,KAAKJ,EAAGA,EAAEK,OAAOL,EAAEK,SAAYL,EAAGA,EAAEM,QAAQN,EAAEM,UAAaN,EAAGA,EAAEO,aAAaP,EAAEO,eAAkBP,EAAEQ,OAASb,MAAO,WAAqC,MAAO,YAAY,QAASc,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEnB,GAAG,IAAIgB,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIC,GAAE,kBAAmBC,UAASA,OAAQ,KAAIrB,GAAGoB,EAAE,MAAOA,GAAED,GAAE,EAAI,IAAGG,EAAE,MAAOA,GAAEH,GAAE,EAAI,IAAII,GAAE,GAAIC,OAAM,uBAAuBL,EAAE,IAAK,MAAMI,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEV,EAAEG,IAAIlB,WAAYc,GAAEI,GAAG,GAAGQ,KAAKD,EAAEzB,QAAQ,SAASa,GAAoB,MAAOI,GAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIY,EAAEA,EAAEzB,QAAQa,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGlB,QAAQ,IAAI,GAAIqB,GAAE,kBAAmBD,UAASA,QAAQF,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,GAAE,MAAOJ,OAAOe,GAAG,SAASR,EAAQnB,EAAOD,GACl7B,YACA6B,QAAOC,eAAe9B,EAAS,cAAgB+B,OAAO,GACtD,IAAIC,GAAUZ,EAAQ,WAIlBa,EAAyB,WACzB,QAASA,MAkBT,MAXAA,GAAQC,cAAgB,SAAUC,EAAQC,GAStC,MARKJ,GAAQK,SAASF,KAClBA,MAEJN,OAAOS,KAAKF,GAAQG,IAAI,SAAUC,EAAKC,OACfC,KAAhBN,EAAOI,KACPL,EAAOK,GAAOJ,EAAOI,MAGtBL,GAEJF,IAEXjC,GAAQiC,QAAUA,IAEfU,UAAU,IAAIC,GAAG,SAASxB,EAAQnB,EAAOD,GAC5C,YACA,IAAI6C,GAAUrC,MAAQA,KAAKqC,QAAW,SAAU5B,EAAGF,GAC/C,GAAI+B,GAAsB,kBAAXC,SAAyB9B,EAAE8B,OAAOC,SACjD,KAAKF,EAAG,MAAO7B,EACf,IAAmBJ,GAAYC,EAA3BI,EAAI4B,EAAEpB,KAAKT,GAAOgC,IACtB,KACI,UAAc,KAANlC,GAAgBA,KAAM,MAAQF,EAAIK,EAAEgC,QAAQC,MAAMF,EAAGG,KAAKvC,EAAEkB,OAExE,MAAOsB,GAASvC,GAAMuC,MAAOA,GAC7B,QACI,IACQxC,IAAMA,EAAEsC,OAASL,EAAI5B,EAAU,SAAI4B,EAAEpB,KAAKR,GAElD,QAAU,GAAIJ,EAAG,KAAMA,GAAEuC,OAE7B,MAAOJ,IAEPK,EAAY9C,MAAQA,KAAK8C,UAAa,WACtC,IAAK,GAAIL,MAAS/B,EAAI,EAAGA,EAAIqC,UAAU5B,OAAQT,IAAK+B,EAAKA,EAAGO,OAAOX,EAAOU,UAAUrC,IACpF,OAAO+B,IAEPQ,EAAYjD,MAAQA,KAAKiD,UAAa,SAASxC,GAC/C,GAAIyC,GAAsB,kBAAXX,SAAyBA,OAAOC,SAAUF,EAAIY,GAAKzC,EAAEyC,GAAIxC,EAAI,CAC5E,IAAI4B,EAAG,MAAOA,GAAEpB,KAAKT,EACrB,IAAIA,GAAyB,gBAAbA,GAAEU,OAAqB,OACnCuB,KAAM,WAEF,MADIjC,IAAKC,GAAKD,EAAEU,SAAQV,MAAI,KACnBc,MAAOd,GAAKA,EAAEC,KAAMiC,MAAOlC,IAG5C,MAAM,IAAI0C,WAAUD,EAAI,0BAA4B,mCAExD7B,QAAOC,eAAe9B,EAAS,cAAgB+B,OAAO,IACtD/B,EAAQqC,SAAW,SAAUuB,GACzB,MAAY,QAARA,IAAgBC,MAAMC,QAAQF,KAGZ,kBAARA,IAAqC,gBAARA,KAE/C5D,EAAQ+D,MAAQ,SAAUC,GACtB,SAAIA,GAASA,EAAMC,QAAQ,QAAU,IAKzCjE,EAAQkE,MAAQ,SAAUC,EAAQC,EAAQC,GACtC,GAAIC,GAAKC,EACLC,EAAMlB,EAASa,EACdE,KACDA,EAAW,SAAUI,EAAGC,GAAK,MAAOD,KAAMC,GAO9C,KACI,IAAK,GAAIC,GAAWlB,EAASW,GAASQ,EAAaD,EAASzB,QAAS0B,EAAWzB,KAAMyB,EAAaD,EAASzB,OAAQ,CAChH,GAAI2B,GAAOD,EAAW7C,OAPhB,SAAU8C,GACfL,EAAIM,KAAK,SAAUL,GAAK,MAAOJ,GAASI,EAAGI,MAC5CL,EAAIpB,KAAKyB,IAMDA,IAGhB,MAAOE,GAAST,GAAQjB,MAAO0B,GAC/B,QACI,IACQH,IAAeA,EAAWzB,OAASoB,EAAKI,EAASK,SAAST,EAAG7C,KAAKiD,GAE1E,QAAU,GAAIL,EAAK,KAAMA,GAAIjB,OAEjC,MAAOmB,IAEXxE,EAAQiF,YAAc,SAAUd,EAAQC,GAEpC,GAAID,EAAOxC,SAAWyC,EAAOzC,OACzB,OAAO,CAEX,KAAK,GAAIT,GAAI,EAAGgE,EAAIf,EAAOxC,OAAQT,EAAIgE,EAAGhE,IACtC,IAAmC,IAA/BiD,EAAOF,QAAQG,EAAOlD,IACtB,OAAO,CAGf,QAAO,QAGLiE,GAAG,SAAS/D,EAAQnB,EAAOD,GACjC,YAIA6B,QAAOC,eAAe9B,EAAS,cAAgB+B,OAAO,IAHtD,SAAkBe,GACd,IAAK,GAAIrB,KAAKqB,GAAQ9C,EAAQoF,eAAe3D,KAAIzB,EAAQyB,GAAKqB,EAAErB,KAG3DL,EAAQ,sBAEdiE,kBAAkB,IAAIC,GAAG,SAASlE,EAAQnB,EAAOD,GACpD,YACA,IAAIuF,GAAa/E,MAAQA,KAAK+E,WAAc,WACxC,GAAIC,GAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgB3D,OAAO8D,iBAChBC,uBAA2B/B,QAAS,SAAU4B,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIjE,KAAKiE,GAAOA,EAAEN,eAAe3D,KAAIgE,EAAEhE,GAAKiE,EAAEjE,MACpDgE,EAAGC,GAE5B,OAAO,UAAUD,EAAGC,GAEhB,QAASG,KAAOrF,KAAKsF,YAAcL,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAa7D,OAAOmE,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,OAGvFhE,QAAOC,eAAe9B,EAAS,cAAgB+B,OAAO,GACtD,IAAIkE,GAAY7E,EAAQ,2BAIpB8E,EAA+B,SAAUC,GAEzC,QAASD,KACL,MAAkB,QAAXC,GAAmBA,EAAOC,MAAM5F,KAAM+C,YAAc/C,KAuB/D,MAzBA+E,GAAUW,EAAeC,GASzBD,EAAcG,QAAU,SAAUC,EAAMC,GACpC,MAAKD,GAGcJ,EAAchE,cAAcqE,OAC3CC,eAAgB,SAChBC,OAAQH,EAAKG,OACbC,MAAOJ,EAAKI,MACZC,QAASL,EAAKK,QACdC,UAAWN,EAAKM,UAChBC,cAAeP,EAAKQ,eACpBC,cAAeT,EAAKU,eACpBC,SAAUX,EAAKW,WAVR,MAcRf,GACTD,EAAUhE,QACZjC,GAAQkG,cAAgBA,IAErBgB,0BAA0B,SAAS,IAAI","file":"policy.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g=(g.Mbed||(g.Mbed = {}));g=(g.Cloud||(g.Cloud = {}));g=(g.Foundation||(g.Foundation = {}));g.Policy = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\n/**\n * Abstract base class for adapters\n */\nvar Adapter = /** @class */ (function () {\n    function Adapter() {\n    }\n    /**\n     * Assign properties of the source object to the target, ignoring values that are undefined on the source\n     * @param target target object\n     * @param source source object\n     */\n    Adapter.assignDefined = function (target, source) {\n        if (!utils_1.isObject(target)) {\n            target = {};\n        }\n        Object.keys(source).map(function (key, _index) {\n            if (source[key] !== undefined) {\n                target[key] = source[key];\n            }\n        });\n        return target;\n    };\n    return Adapter;\n}());\nexports.Adapter = Adapter;\n\n},{\"./utils\":2}],2:[function(require,module,exports){\n\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isObject = function (val) {\n    if (val === null || Array.isArray(val)) {\n        return false;\n    }\n    return typeof val === \"function\" || typeof val === \"object\";\n};\nexports.isJwt = function (token) {\n    if (token && token.indexOf(\"rt_\") > -1) {\n        return true;\n    }\n    return false;\n};\nexports.union = function (array1, array2, equality) {\n    var e_1, _a;\n    var res = __spread(array1);\n    if (!equality) {\n        equality = function (x, y) { return x === y; };\n    }\n    var _loop_1 = function (item) {\n        if (!res.some(function (x) { return equality(x, item); })) {\n            res.push(item);\n        }\n    };\n    try {\n        for (var array2_1 = __values(array2), array2_1_1 = array2_1.next(); !array2_1_1.done; array2_1_1 = array2_1.next()) {\n            var item = array2_1_1.value;\n            _loop_1(item);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (array2_1_1 && !array2_1_1.done && (_a = array2_1.return)) _a.call(array2_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return res;\n};\nexports.arraysEqual = function (array1, array2) {\n    // compare lengths - can save a lot of time\n    if (array1.length !== array2.length) {\n        return false;\n    }\n    for (var i = 0, l = array1.length; i < l; i++) {\n        if (array1.indexOf(array2[i]) === -1) {\n            return false;\n        }\n    }\n    return true;\n};\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./policyAdapter\"));\n\n},{\"./policyAdapter\":4}],4:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar adapter_1 = require(\"../../../common/adapter\");\n/**\n *Policy adapter\n */\nvar PolicyAdapter = /** @class */ (function (_super) {\n    __extends(PolicyAdapter, _super);\n    function PolicyAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * fromApi\n     * @param data - data\n     * @param instance - instance\n     */\n    PolicyAdapter.fromApi = function (data, instance) {\n        if (!data) {\n            return null;\n        }\n        var mappedEntity = PolicyAdapter.assignDefined(instance || {}, {\n            _discriminator: \"POLICY\",\n            action: data.action,\n            allow: data.allow,\n            feature: data.feature,\n            inherited: data.inherited,\n            inheritedFrom: data.inherited_from,\n            inheritedType: data.inherited_type,\n            resource: data.resource,\n        });\n        return mappedEntity;\n    };\n    return PolicyAdapter;\n}(adapter_1.Adapter));\nexports.PolicyAdapter = PolicyAdapter;\n\n},{\"../../../common/adapter\":1}]},{},[3])(3)\n});\n"],"sourceRoot":"../../lib"}