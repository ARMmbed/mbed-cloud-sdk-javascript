{"version":3,"sources":["../../src/_tests/apiResponse.ts"],"names":["Object","defineProperty","exports","value","_a","intern","getInterface","suite","test","beforeEach","assert","getPlugin","apiBase_1","require","Api","_super","apply","this","arguments","__extends","prototype","complete","error","response","acceptHeader","callback","call","ApiBase","api","_error","_data","body","text","data","strictEqual","birthday","typeOf","getDate","getMonth","getFullYear","date","notEqual","message","details"],"mappings":"udAAA;;;;;;;;;;;;;;;;sUAiBMA,QAAAC,eAAAC,EAAA,cAAEC,OAAK,GACL,IAAAC,GAAAC,OAAAC,aAAA,OAAAC,EAAoCH,EAAAG,MAAAC,EAAAJ,EAAAI,KAAAC,EAAAL,EAAAK,WAE5CC,EAAAL,OAAAM,UAAA,QAAAD,OAGAE,EAAAC,EAAA,qBAAkBC,EAAA,SAAOC,gBAIxB,MAAA,QAAAA,GAAAA,EAAAC,MAAAC,KAAAC,YAAAD,KAJiB,MAAlBE,GAAAL,EAAAC,KAEQK,UAAOC,SAAA,SAAMC,EAAQC,EAACC,EAAiBC,GAC1C,MAAAV,GAAAK,UAAAC,SAAAK,KAAAT,KAAAK,EAAAC,EAAAC,EAAAC,IAHaX,GAMlBF,EAAMe,WAEF,UAAa,WAEb,GAAAC,KACU,WACPA,EAAA,GAAAd,OAIC,0BAAyB,aACrBO,SAAO,KAAM,KAAA,KAAA,SAAAQ,EAAAC,GACdpB,GAAA,SAKH,qBAAoB,aAIhBW,SAAM,MACNU,KAJS,OAKVC,KAHC,aAIA,SAAOH,EAAgBI,GACxBvB,EAAAwB,YAAAD,EAPU,cAYb,qBAAoB,aAGhBZ,SAAM,MACPW,KAFC,2BAGmB,SAAUH,EAAEI,GAChCvB,EAAAwB,YAAAD,EAJC,cASJ,mBAAa,aAGTZ,SAAM,YAELc,SAHD,gDAKmB,SAAUN,EAAQI,GACrCvB,EAAO0B,OAAAH,EAAYE,SAAK,QACxBzB,EAAOwB,YAAYD,EAAKE,SAASE,UAAU,IAC3C3B,EAAOwB,YAAYD,EAAKE,SAASG,WAAW,GAC7C5B,EAAAwB,YAAAD,EAAAE,SAAAI,cAAA,YAKH,6CAAsC,WAEtC,GAAIC,GAAA,2BACAnB,SAAM,YAELc,SAAAK,uBAEkB,SAAUX,EAAQI,GACrCvB,EAAO0B,OAAAH,EAAYE,SAAK,UACzBzB,EAAAwB,YAAAD,EAAAE,SAAAK,SAKH,gDAAsC,WAEtC,GAAIA,GAAA,2BACAnB,SAAM,YAELc,SAAAK,SAED,SAAcX,EAAKI,GACnBvB,EAAO0B,OAAAH,EAASE,SAAY,UAC7BzB,EAAA+B,SAAAR,EAAAO,SAKH,qBAAyB,aAGrBnB,UACDqB,QAFU,eAGT,KAAO,SAAYpB,GACpBZ,EAAAwB,YAAAZ,EAAAoB,QAJU,gBASb,4BAAyB,aAIrBrB,UACDqB,QAJa,WAMbX,KAJU,qBAKT,SAAOT,GACPZ,EAAOwB,YAAYZ,EAAMoB,QARb,UASbhC,EAAAwB,YAAAZ,EAAAqB,QAPU,sBAYb,mCAAyB,aAKrBtB,UACDqB,QALG,WAOFX,KAJS,sBAMRW,QARW,gBAUZ,SAAOpB,GACPZ,EAAOwB,YAAYZ,EAAMoB,QAXb,UAYbhC,EAAAwB,YAAAZ,EAAAqB,QAVU,sBAeb,+BAAyB,aAIrBtB,UACDqB,QAJY,iBAOVA,QALQ,gBAOT,SAAOpB,GACRZ,EAAAwB,YAAAZ,EAAAoB,QARU,gBAab,uCAAyB,aAIrBrB,UACDqB,QAJY,0BAQNpB,MANI,iBAST,SAAOA,GACRZ,EAAAwB,YAAAZ,EAAAoB,QAVU","file":"apiResponse.js","sourcesContent":["/*\n* Mbed Cloud JavaScript SDK\n* Copyright Arm Limited 2017\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n* http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\nconst { suite, test, beforeEach } = intern.getInterface(\"tdd\");\nconst { assert } = intern.getPlugin(\"chai\");\n\nimport { ApiBase } from \"../common/apiBase\";\nimport { SDKError } from \"../common/sdkError\";\n\nclass Api extends ApiBase {\n    public complete(error: any, response: any, acceptHeader: string, callback?: (sdkError: SDKError, data) => any) {\n        return super.complete(error, response, acceptHeader, callback);\n    }\n}\n\nsuite(\"apiBase\", () => {\n\n    let api: Api;\n\n    beforeEach(() => {\n        api = new Api();\n    });\n\n    test(\"should execute callback\", () => {\n\n        api.complete(null, null, null, (_error, _data) => {\n            assert(true);\n        });\n    });\n\n    test(\"should return body\", () => {\n\n        const body = \"body\";\n        const text = \"text\";\n\n        api.complete(null, {\n            body: body,\n            text: text\n        }, null, (_error, data) => {\n            assert.strictEqual(data, body);\n        });\n    });\n\n    test(\"should return text\", () => {\n\n        const text = \"text\";\n\n        api.complete(null, {\n            text: text\n        }, \"application/json\", (_error, data) => {\n            assert.strictEqual(data, text);\n        });\n    });\n\n    test(\"should make date\", () => {\n\n        const date = \"1977-01-12T14:49:20.869Z\";\n\n        api.complete(null, {\n            body: {\n                birthday: date\n            }\n        }, \"application/json\", (_error, data) => {\n            assert.typeOf(data.birthday, \"date\");\n            assert.strictEqual(data.birthday.getDate(), 12);\n            assert.strictEqual(data.birthday.getMonth(), 0);\n            assert.strictEqual(data.birthday.getFullYear(), 1977);\n        });\n    });\n\n    test(\"should not make date with application/json\", () => {\n\n        const date = \"nineteen-seventy-seven\";\n\n        api.complete(null, {\n            body: {\n                birthday: date\n            }\n        }, \"application/json\", (_error, data) => {\n            assert.typeOf(data.birthday, \"string\");\n            assert.strictEqual(data.birthday, date);\n        });\n    });\n\n    test(\"should not make date without application/json\", () => {\n\n        const date = \"nineteen-seventy-seven\";\n\n        api.complete(null, {\n            body: {\n                birthday: date\n            }\n        }, null, (_error, data) => {\n            assert.typeOf(data.birthday, \"string\");\n            assert.notEqual(data, date);\n        });\n    });\n\n    test(\"should raise error\", () => {\n\n        const message = \"abort!\";\n\n        api.complete({\n            message: message\n        }, null, null, error => {\n            assert.strictEqual(error.message, message);\n        });\n    });\n\n    test(\"should have error details\", () => {\n\n        const message = \"abort!\";\n        const details = \"more details\";\n\n        api.complete({\n            message: message\n        }, {\n            body: details\n        }, null, error => {\n            assert.strictEqual(error.message, message);\n            assert.strictEqual(error.details, details);\n        });\n    });\n\n    test(\"should raise error from response\", () => {\n\n        const message = \"abort!\";\n        const responseError = \"error!\";\n        const details = \"more details\";\n\n        api.complete({\n            message: message\n        }, {\n            body: details,\n            error: {\n                message: responseError\n            }\n        }, null, error => {\n            assert.strictEqual(error.message, responseError);\n            assert.strictEqual(error.details, details);\n        });\n    });\n\n    test(\"should raise error from body\", () => {\n\n        const message = \"abort!\";\n        const bodyError = \"error!\";\n\n        api.complete({\n            message: message\n        }, {\n            body: {\n                message: bodyError\n            }\n        }, null, error => {\n            assert.strictEqual(error.message, bodyError);\n        });\n    });\n\n    test(\"should raise error from body message\", () => {\n\n        const message = \"abort!\";\n        const bodyError = \"error!\";\n\n        api.complete({\n            message: message\n        }, {\n            body: {\n                message: {\n                    error: bodyError\n                }\n            }\n        }, null, error => {\n            assert.strictEqual(error.message, bodyError);\n        });\n    });\n});\n"],"sourceRoot":"../../lib"}